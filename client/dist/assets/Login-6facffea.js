import{_ as x,u as k,a as h,i as m,A as S,r as I,b as a,o as y,c as B,d as t,e as C,w as n,F as L,f as N,g as U}from"./index-14b28817.js";import{n as V}from"./Navigator-78d98e5e.js";const q={class:"login-panel"},A={__name:"Login",setup(F){const i=k();h();const p=m("axios"),l=m("message"),c=S();let _={account:[{required:!0,message:"请输入账号",trigger:"blur"},{min:3,max:12,message:"账号长度为3-12个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:18,message:"密码长度为6-18个字符",trigger:"blur"}]};const e=I({account:localStorage.getItem("account")||"",password:localStorage.getItem("password")||"",rember:localStorage.getItem("rember")==1||!1}),g=async()=>{let s=await p.post("/admin/login",{account:e.account,password:e.password});s.data.code==200?(c.token=s.data.data.token,c.account=s.data.data.account,c.id=s.data.data.id,e.rember&&(localStorage.setItem("account",e.account),localStorage.setItem("password",e.password),localStorage.setItem("rember",e.rember?1:0)),i.push("/dashboard"),l.info("登录成功")):l.error("登录失败")};return(s,o)=>{const d=a("n-input"),u=a("n-form-item"),b=a("n-form"),f=a("n-checkbox"),w=a("n-button"),v=a("n-card");return y(),B(L,null,[t(V),C("div",q,[t(v,{title:"管理后台登录"},{footer:n(()=>[t(f,{checked:e.rember,"onUpdate:checked":o[2]||(o[2]=r=>e.rember=r),label:"记住我"},null,8,["checked"]),t(w,{onClick:g},{default:n(()=>[N("登录")]),_:1})]),default:n(()=>[t(b,{rules:U(_),model:e},{default:n(()=>[t(u,{path:"account",label:"账号"},{default:n(()=>[t(d,{value:e.account,"onUpdate:value":o[0]||(o[0]=r=>e.account=r),placeholder:"请输入账号"},null,8,["value"])]),_:1}),t(u,{path:"password",label:"密码"},{default:n(()=>[t(d,{value:e.password,"onUpdate:value":o[1]||(o[1]=r=>e.password=r),type:"password",placeholder:"请输入密码"},null,8,["value"])]),_:1})]),_:1},8,["rules","model"])]),_:1})])],64)}}},E=x(A,[["__scopeId","data-v-cbb8166b"]]);export{E as default};

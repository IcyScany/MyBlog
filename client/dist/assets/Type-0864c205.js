import{n as z}from"./Navigator-78d98e5e.js";import{_ as B,u as T,a as M,i as D,k as v,h as F,r as H,b as L,o as i,c as l,d as k,e as n,F as h,l as $,n as N,t as u,v as V,f as C,p as j,m as O}from"./index-14b28817.js";const m=r=>(j("data-v-8cfbec6b"),r=r(),O(),r),R={class:"type-content shadow"},q=["onClick"],E={class:"article-section"},U={class:"article-card shadow"},Y={style:{flex:"1"}},A=["onClick"],G=["onClick"],J=["innerHTML"],K={class:"article-info"},P=m(()=>n("div",{class:"iconfont icon-gerenzhongxin-wode-02"},null,-1)),Q=m(()=>n("div",{class:"iconfont icon-shijian"},null,-1)),W=m(()=>n("hr",null,null,-1)),X={__name:"Type",setup(r){const S=T();M();const p=D("axios"),_=v([]),g=v([]);F(()=>{I(),y()});const t=H({page:1,pageSize:8,pageCount:0,count:0,keyword:"",categoryId:388417193734213}),f=v(0),x=o=>{f.value=o},y=async(o=0)=>{o!=0&&(t.page=o);let s=await p.get(`/blog/search?keyword=${t.keyword}&page=${t.page}&pageSize=${t.pageSize}&categoryId=${t.categoryId}`);_.value=s.data.data.rows;for(let a of _.value){let e=new Date(a.create_time);a.create_time=`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()} ${e.getHours()}:${e.getMinutes()}:${e.getSeconds()}`;let c=a.content.substring(a.content.indexOf("src=")+5,a.content.indexOf(".png")+4);a.img_url=c;let d=await p.get("/category/category_name?id="+a.category_id);a.type=d.data.rows[0].name,a.content=a.content.substring(0,120)}t.count=s.data.data.count,t.pageCount=parseInt(t.count/t.pageSize)+(t.count%t.pageSize>0?1:0)},I=async()=>{let o=await p.get("/category/list");g.value=o.data.rows.map(s=>({label:s.name,value:s.id})),console.log(g.value)},w=async o=>{t.categoryId=o,y()},b=o=>{S.push({path:"/detail",query:{id:o.id}})};return(o,s)=>{const a=L("n-pagination");return i(),l(h,null,[k(z),n("div",R,[(i(!0),l(h,null,$(g.value,(e,c)=>(i(),l("div",{onClick:d=>(w(e.value),x(c)),class:N(f.value==c?"addclass":"type-label")},u(e.label),11,q))),256))]),n("div",E,[(i(!0),l(h,null,$(_.value,(e,c)=>(i(),l("div",U,[n("div",{class:"article-img",style:V({backgroundImage:`url(${e.img_url})`})},null,4),n("div",Y,[n("div",{class:"article-title",onClick:d=>b(e)},u(e.title),9,A),n("div",{class:"article-type",onClick:d=>w(e.category_id)},u(e.type),9,G),n("div",{class:"article-content",innerHTML:e.content},null,8,J),n("div",K,[P,C("Scany   "),Q,C(u(e.create_time),1)]),W])]))),256)),k(a,{class:"page-button","onUpdate:page":[y,s[0]||(s[0]=e=>t.page=e)],page:t.page,"page-count":t.pageCount},null,8,["page","page-count"])])],64)}}},te=B(X,[["__scopeId","data-v-8cfbec6b"]]);export{te as default};

import{i as g,k as f,r as b,h as L,b as u,o as w,c as y,d as o,w as l,f as r,e,F as j,l as A,t as C}from"./index-14b28817.js";const E=e("thead",null,[e("tr",null,[e("th",null,"序号"),e("th",null,"编号"),e("th",null,"名称"),e("th",null,"操作")])],-1),P=e("div",null,"添加分类",-1),S=e("div",null,"修改分类",-1),G={__name:"Category",setup(q){const c=g("axios"),U=g("dialog"),s=g("message"),k=f([]),_=f(!1),m=f(!1),v=b({name:""}),d=b({id:0,name:""});L(()=>{p()});const p=async()=>{let t=await c.get("/category/list");k.value=t.data.rows},D=async t=>{U.warning({title:"警告",content:"是否删除？",positiveText:"确定",negativeText:"取消",onPositiveClick:async()=>{let a=await c.delete(`/category/_token/delete?id=${t.id}`);a.data.code==200?(p(),s.info(a.data.msg)):s.error(a.data.msg)},onNegativeClick:()=>{}})},N=async()=>{let t=await c.post("/category/_token/add",{name:v.name});t.data.code==200?(p(),s.info(t.data.msg)):s.error(t.data.msg),_=!1},$=async t=>{m.value=!0,d.id=t.id,d.name=t.name},B=async()=>{let t=await c.put("/category/_token/update",{id:d.id,name:d.name});t.data.code==200?(p(),s.info(t.data.msg)):s.error(t.data.msg),m=!1};return(t,a)=>{const i=u("n-button"),M=u("n-space"),T=u("n-table"),h=u("n-input"),x=u("n-modal");return w(),y("div",null,[o(i,{onClick:a[0]||(a[0]=n=>_.value=!0)},{default:l(()=>[r("添加")]),_:1}),o(T,{bordered:!1,"single-line":!1},{default:l(()=>[E,e("tbody",null,[(w(!0),y(j,null,A(k.value,(n,V)=>(w(),y("tr",null,[e("td",null,C(V+1),1),e("td",null,C(n.id),1),e("td",null,C(n.name),1),e("td",null,[o(M,null,{default:l(()=>[o(i,{onClick:F=>$(n)},{default:l(()=>[r("修改")]),_:2},1032,["onClick"]),o(i,{onClick:F=>D(n)},{default:l(()=>[r("删除")]),_:2},1032,["onClick"])]),_:2},1024)])]))),256))])]),_:1}),o(x,{show:_.value,"onUpdate:show":a[2]||(a[2]=n=>_.value=n),preset:"dialog",title:"Dialog"},{header:l(()=>[P]),action:l(()=>[e("div",null,[o(i,{onClick:N},{default:l(()=>[r("提交")]),_:1})])]),default:l(()=>[e("div",null,[o(h,{value:v.name,"onUpdate:value":a[1]||(a[1]=n=>v.name=n),type:"text",placeholder:"请输入名称"},null,8,["value"])])]),_:1},8,["show"]),o(x,{show:m.value,"onUpdate:show":a[4]||(a[4]=n=>m.value=n),preset:"dialog",title:"Dialog"},{header:l(()=>[S]),action:l(()=>[e("div",null,[o(i,{onClick:B},{default:l(()=>[r("提交")]),_:1})])]),default:l(()=>[e("div",null,[o(h,{value:d.name,"onUpdate:value":a[3]||(a[3]=n=>d.name=n),type:"text",placeholder:"请输入名称"},null,8,["value"])])]),_:1},8,["show"])])}}};export{G as default};

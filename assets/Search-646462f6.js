import{n as I}from"./Navigator-78d98e5e.js";import{_ as b,u as z,a as B,i as M,k as w,h as D,r as F,b as d,o as h,c as v,d as i,e as t,w as x,f as r,t as _,F as k,l as H,v as L,p as N,m as T}from"./index-14b28817.js";const m=l=>(N("data-v-9d3b7a20"),l=l(),T(),l),V={class:"search-content shadow"},j={class:"search-box",style:{display:"flex"}},O={style:{"margin-top":"15px"}},R={style:{"text-decoration":"underline"}},U={class:"article-section"},q={class:"article-card shadow"},E={style:{flex:"1"}},Y=["onClick"],A=["onClick"],G=["innerHTML"],J={class:"article-info"},K=m(()=>t("div",{class:"iconfont icon-gerenzhongxin-wode-02"},null,-1)),P=m(()=>t("div",{class:"iconfont icon-shijian"},null,-1)),Q=m(()=>t("hr",null,null,-1)),W={__name:"Search",setup(l){const S=z();B();const f=M("axios"),p=w([]);w([]),D(()=>{u()});const e=F({page:1,pageSize:8,pageCount:0,count:0,keyword:"",categoryId:0}),u=async(c=0)=>{c!=0&&(e.page=c);let o=await f.get(`/blog/search?keyword=${e.keyword}&page=${e.page}&pageSize=${e.pageSize}&categoryId=${e.categoryId}`);p.value=o.data.data.rows;for(let a of p.value){let s=new Date(a.create_time);a.create_time=`${s.getFullYear()}-${s.getMonth()+1}-${s.getDate()} ${s.getHours()}:${s.getMinutes()}:${s.getSeconds()}`;let g=a.content.substring(a.content.indexOf("src=")+5,a.content.indexOf(".png")+4);a.img_url=g;let y=await f.get("/category/category_name?id="+a.category_id);a.type=y.data.rows[0].name,a.content=a.content.substring(0,120)}e.count=o.data.data.count,e.pageCount=parseInt(e.count/e.pageSize)+(e.count%e.pageSize>0?1:0)},$=c=>{S.push({path:"/detail",query:{id:c.id}})};return(c,o)=>{const a=d("n-input"),s=d("n-button"),g=d("n-space"),y=d("n-pagination");return h(),v(k,null,[i(I),t("div",V,[t("div",j,[i(g,{class:"search"},{default:x(()=>[i(a,{value:e.keyword,"onUpdate:value":o[0]||(o[0]=n=>e.keyword=n),style:{width:"800px"},placeholder:"请输入关键字"},null,8,["value"]),i(s,{type:"primary",ghost:"",onClick:o[1]||(o[1]=n=>u(0))},{default:x(()=>[r(" 搜索 ")]),_:1})]),_:1})]),t("div",O,[r("搜索关于 "),t("b",R,_(e.keyword),1),r(" 的相关内容")])]),t("div",U,[(h(!0),v(k,null,H(p.value,(n,X)=>(h(),v("div",q,[t("div",{class:"article-img",style:L({backgroundImage:`url(${n.img_url})`})},null,4),t("div",E,[t("div",{class:"article-title",onClick:C=>$(n)},_(n.title),9,Y),t("div",{class:"article-type",onClick:C=>c.searchByCategory(n.category_id)},_(n.type),9,A),t("div",{class:"article-content",innerHTML:n.content},null,8,G),t("div",J,[K,r("Scany   "),P,r(_(n.create_time),1)]),Q])]))),256)),i(y,{class:"page-button","onUpdate:page":[u,o[2]||(o[2]=n=>e.page=n)],page:e.page,"page-count":e.pageCount},null,8,["page","page-count"])])],64)}}},te=b(W,[["__scopeId","data-v-9d3b7a20"]]);export{te as default};
